$(() => {
    $("#edit").validate({
        rules: {
            name: {
                required: true
            },
            nip: {
                required: true,
                exactLength: 10,
                number: true,
            },
            regon: {
                exactLength: 9,
                number: true
            },
            krs: {
                exactLength: 10,
                number: true
            },
            email: {
                required: true,
                email: true
            },
            phone_number: {
                required: true,
            },
            street: {
                required: true
            },
            city: {
                required: true
            },
            post_code: {
                required: true,
            }
        }
    })
});

$(() => {
    $("#edit").on("submit", submit);
});

function submit(event) {
    event.preventDefault();
    if ($("#edit").valid()) {
        $("#progressText").html("Trwa edycja...");
        $("#progressBar").removeClass("d-none");
        $("#edit input[type='submit']").prop("disabled", true);
        $.ajax({
            type: "POST",
            url: "/company-data/edit",
            data: $("#edit").serialize()
        })
            .done((response) => displayResponse('edit', response))
            .fail(error => displayResponse('edit', 0));
    }
}
